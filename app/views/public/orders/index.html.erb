<div class="container">
  <h3 class="mb-3">注文履歴一覧</h3>
  <div class="row">
    <div class="col-11 mr-auto">
      <% if @orders.count == 0 %>
        <p class="m-5"><strong>注文履歴はありません</strong></p>
      <% else %>
      <table class="table table-bordered">
        <tbody>
          <tr class="table-info">
            <td scope="col">注文日</td>
            <td scope="col">配送先</td>
            <td scope="col">注文商品</td>
            <td scope="col">支払金額</td>
            <td scope="col">ステータス</td>
            <td scope="col">注文詳細</td>
          </tr>
          <% @orders.each do |order| %>
          <tr>
            <td scope="row"><%= order.created_at.strftime('%Y/%m/%d') %></td>
            <td>
                <%= "〒" + order.destination_postal_code %><br>
                <%= order.destination_address %><br>
                <%= order.customer.last_name %><%= order.customer.first_name %>
            </td>
            <td>
              <% order.order_commodities.each do |order_commodity| %>
                <%= order_commodity.commodity.name %><br>
              <% end %>
            </td>
            <td><%= order.total_due.to_s(:delimited) + "円" %></td>
            <td><%= order.order_status %></td>
            <td><%= link_to "表示する", order_path(order.id), class: "btn btn-success" %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
      <% end %>
      <%= paginate @orders %>
    </div>
  </div>
</div>